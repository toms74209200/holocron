openapi: 3.0.3
info:
  title: Holocron - Library Management API
  description: 書庫アプリのAPI仕様
  version: 1.0.0
  contact:
    name: holocron


servers:
  - url: http://localhost:8080
    description: Local development server

tags:
  - name: Users
    description: ユーザー管理
  - name: Books
    description: 書籍管理
  - name: Lending
    description: 貸出・返却

security:
  - BearerAuth: []

paths:
  /users:
    post:
      summary: ユーザー登録
      description: 新規ユーザーを登録し、Firebase Custom Tokenを発行
      operationId: postUsers
      tags:
        - Users
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: ユーザー名（未指定の場合は自動生成）
                  maxLength: 50
            example:
              name: "ゲスト"
      responses:
        '201':
          description: ユーザー登録成功
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - name
                  - customToken
                  - createdAt
                properties:
                  id:
                    type: string
                    format: uuid
                  name:
                    type: string
                  customToken:
                    type: string
                    description: Firebase Custom Token
                  createdAt:
                    type: string
                    format: date-time
                  updatedAt:
                    type: string
                    format: date-time
              example:
                id: "550e8400-e29b-41d4-a716-446655440000"
                name: "ゲスト"
                customToken: "eyJhbGciOiJub25lIiwidHlwIjoiSldUIn0.eyJpc3MiOiJmaXJlYmFzZS1hZG1pbnNka0Bob2xvY3Jvbi5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsInN1YiI6ImZpcmViYXNlLWFkbWluc2RrQGhvbG9jcm9uLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiI1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAiLCJpYXQiOjE3Njk4MzMyMzMsImV4cCI6MTc2OTgzNjgzM30."
                createdAt: "2024-01-15T10:30:00Z"
                updatedAt: "2024-01-15T10:30:00Z"
        '400':
          description: リクエストが不正
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
        '409':
          description: ユーザーが既に存在する
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string

  /books:
    get:
      summary: 書籍一覧・検索
      description: 書籍の一覧を取得。タイトル・著者で検索可能。貸出ステータスも含む。
      operationId: getBooks
      tags:
        - Books
      parameters:
        - name: q
          in: query
          description: 検索キーワード（タイトル・著者）
          schema:
            type: string
        - name: code
          in: query
          description: コード（ISBN/雑誌コード/JANコード）で絞り込み
          schema:
            type: string
        - name: status
          in: query
          description: 貸出ステータスでフィルタ
          schema:
            type: string
            enum:
              - available
              - borrowed
        - name: limit
          in: query
          description: 取得件数上限
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: offset
          in: query
          description: オフセット
          schema:
            type: integer
            default: 0
            minimum: 0
      responses:
        '200':
          description: 書籍一覧
          content:
            application/json:
              schema:
                type: object
                required:
                  - items
                  - total
                properties:
                  items:
                    type: array
                    items:
                      type: object
                      required:
                        - id
                        - title
                        - authors
                        - status
                        - createdAt
                      properties:
                        id:
                          type: string
                          format: uuid
                        code:
                          type: string
                          description: バーコード（ISBN/雑誌コード/JANコード）
                        title:
                          type: string
                        authors:
                          type: array
                          items:
                            type: string
                        publisher:
                          type: string
                        publishedDate:
                          type: string
                        thumbnailUrl:
                          type: string
                          format: uri
                        status:
                          type: string
                          enum:
                            - available
                            - borrowed
                        borrower:
                          type: object
                          required:
                            - id
                            - name
                            - borrowedAt
                          properties:
                            id:
                              type: string
                              format: uuid
                            name:
                              type: string
                            borrowedAt:
                              type: string
                              format: date-time
                        createdAt:
                          type: string
                          format: date-time
                  total:
                    type: integer
              example:
                items:
                  - id: "550e8400-e29b-41d4-a716-446655440001"
                    code: "9784873119045"
                    title: "Go言語によるWebアプリケーション開発"
                    authors:
                      - "Mat Ryer"
                    publisher: "オライリージャパン"
                    publishedDate: "2016-01-22"
                    thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-752-2.jpeg"
                    status: "available"
                    createdAt: "2024-01-10T09:00:00Z"
                  - id: "550e8400-e29b-41d4-a716-446655440002"
                    code: "9784297126575"
                    title: "プロを目指す人のためのTypeScript入門"
                    authors:
                      - "鈴木僚太"
                    publisher: "技術評論社"
                    publishedDate: "2022-04-22"
                    thumbnailUrl: "https://gihyo.jp/assets/images/cover/2022/thumb/TH800_9784297127473.jpg"
                    status: "borrowed"
                    borrower:
                      id: "550e8400-e29b-41d4-a716-446655440099"
                      name: "ゲスト"
                      borrowedAt: "2024-01-12T14:30:00Z"
                    createdAt: "2024-01-08T11:00:00Z"
                  - id: "550e8400-e29b-41d4-a716-446655440003"
                    code: "9784873117584"
                    title: "リーダブルコード"
                    authors:
                      - "Dustin Boswell"
                      - "Trevor Foucher"
                    publisher: "オライリージャパン"
                    publishedDate: "2012-06-23"
                    thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-565-8.jpeg"
                    status: "available"
                    createdAt: "2024-01-05T16:00:00Z"
                  - id: "550e8400-e29b-41d4-a716-446655440004"
                    code: "9784774142043"
                    title: "Webを支える技術"
                    authors:
                      - "山本陽平"
                    publisher: "技術評論社"
                    publishedDate: "2010-04-08"
                    thumbnailUrl: "https://gihyo.jp/assets/images/cover/2010/thumb/TH800_9784774142043.jpg"
                    status: "available"
                    createdAt: "2024-01-03T08:30:00Z"
                  - id: "550e8400-e29b-41d4-a716-446655440005"
                    code: "9784873118222"
                    title: "プログラミングRust 第2版"
                    authors:
                      - "Jim Blandy"
                      - "Jason Orendorff"
                      - "Leonora F. S. Tindall"
                    publisher: "オライリージャパン"
                    publishedDate: "2022-01-19"
                    thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-978-6.jpeg"
                    status: "borrowed"
                    borrower:
                      id: "550e8400-e29b-41d4-a716-446655440098"
                      name: "ゲスト"
                      borrowedAt: "2024-01-14T10:00:00Z"
                    createdAt: "2024-01-01T12:00:00Z"
                total: 100
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "UNAUTHORIZED"
                message: "認証が必要です"

    post:
      summary: 書籍登録（手動）
      description: タイトル・著者などを直接指定して書籍を登録
      operationId: postBooks
      tags:
        - Books
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - authors
              properties:
                code:
                  type: string
                  description: バーコード（ISBN/雑誌コード/JANコード）
                title:
                  type: string
                  description: タイトル
                authors:
                  type: array
                  items:
                    type: string
                  description: 著者リスト
                publisher:
                  type: string
                  description: 出版社
                publishedDate:
                  type: string
                  description: 出版日
                thumbnailUrl:
                  type: string
                  format: uri
                  description: サムネイル画像URL
            example:
              title: "詳解システム・パフォーマンス 第2版"
              authors:
                - "Brendan Gregg"
              publisher: "オライリージャパン"
              publishedDate: "2023-01-26"
              thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-978-6.jpeg"
      responses:
        '201':
          description: 書籍登録成功
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - title
                  - authors
                  - status
                  - createdAt
                properties:
                  id:
                    type: string
                    format: uuid
                  code:
                    type: string
                    description: バーコード（ISBN/雑誌コード/JANコード）
                  title:
                    type: string
                  authors:
                    type: array
                    items:
                      type: string
                  publisher:
                    type: string
                  publishedDate:
                    type: string
                  thumbnailUrl:
                    type: string
                    format: uri
                  status:
                    type: string
                    enum:
                      - available
                      - borrowed
                  createdAt:
                    type: string
                    format: date-time
              example:
                id: "550e8400-e29b-41d4-a716-446655440010"
                title: "詳解システム・パフォーマンス 第2版"
                authors:
                  - "Brendan Gregg"
                publisher: "オライリージャパン"
                publishedDate: "2023-01-26"
                thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-978-6.jpeg"
                status: "available"
                createdAt: "2024-01-15T10:30:00Z"
        '400':
          description: リクエストが不正
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "BAD_REQUEST"
                message: "タイトルは必須です"
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "UNAUTHORIZED"
                message: "認証が必要です"

  /books/code:
    post:
      summary: 書籍登録（コード）
      description: バーコード（ISBN/雑誌コード/JANコード）から外部APIで情報取得して登録
      operationId: postBooksCode
      tags:
        - Books
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - code
              properties:
                code:
                  type: string
                  description: バーコード（ISBN/雑誌コード/JANコード）
            example:
              code: "9784873119045"
      responses:
        '201':
          description: 書籍登録成功
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - title
                  - authors
                  - status
                  - createdAt
                properties:
                  id:
                    type: string
                    format: uuid
                  code:
                    type: string
                    description: バーコード（ISBN/雑誌コード/JANコード）
                  title:
                    type: string
                  authors:
                    type: array
                    items:
                      type: string
                  publisher:
                    type: string
                  publishedDate:
                    type: string
                  thumbnailUrl:
                    type: string
                    format: uri
                  status:
                    type: string
                    enum:
                      - available
                      - borrowed
                  createdAt:
                    type: string
                    format: date-time
              example:
                id: "550e8400-e29b-41d4-a716-446655440001"
                code: "9784873119045"
                title: "Go言語によるWebアプリケーション開発"
                authors:
                  - "Mat Ryer"
                publisher: "オライリージャパン"
                publishedDate: "2016-01-22"
                thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-904-5.jpeg"
                status: "available"
                createdAt: "2024-01-15T10:30:00Z"
        '400':
          description: リクエストが不正
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "BAD_REQUEST"
                message: "codeは必須です"
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "UNAUTHORIZED"
                message: "認証が必要です"
        '404':
          description: codeに該当する書籍情報が見つからない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "NOT_FOUND"
                message: "指定されたコードに該当する書籍情報が見つかりません"
        '409':
          description: 書籍が既に登録されている
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "CONFLICT"
                message: "この書籍は既に登録されています"

  /books/{bookId}:
    get:
      summary: 書籍詳細取得
      description: 指定した書籍の詳細情報を取得
      operationId: getBook
      tags:
        - Books
      parameters:
        - name: bookId
          in: path
          required: true
          description: 書籍ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 書籍詳細
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - title
                  - authors
                  - status
                  - createdAt
                properties:
                  id:
                    type: string
                    format: uuid
                  code:
                    type: string
                    description: バーコード（ISBN/雑誌コード/JANコード）
                  title:
                    type: string
                  authors:
                    type: array
                    items:
                      type: string
                  publisher:
                    type: string
                  publishedDate:
                    type: string
                  thumbnailUrl:
                    type: string
                    format: uri
                  status:
                    type: string
                    enum:
                      - available
                      - borrowed
                  borrower:
                    type: object
                    required:
                      - id
                      - name
                      - borrowedAt
                    properties:
                      id:
                        type: string
                        format: uuid
                      name:
                        type: string
                      borrowedAt:
                        type: string
                        format: date-time
                  createdAt:
                    type: string
                    format: date-time
              example:
                id: "550e8400-e29b-41d4-a716-446655440001"
                code: "9784873119045"
                title: "Go言語によるWebアプリケーション開発"
                authors:
                  - "Mat Ryer"
                publisher: "オライリージャパン"
                publishedDate: "2016-01-22"
                thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-904-5.jpeg"
                status: "available"
                createdAt: "2024-01-10T09:00:00Z"
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - errorCode
                  - message
                properties:
                  errorCode:
                    type: string
                  message:
                    type: string
              example:
                errorCode: "UNAUTHORIZED"
                message: "認証が必要です"
        '404':
          description: 書籍が見つからない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "NOT_FOUND"
                message: "指定された書籍が見つかりません"

    post:
      summary: 書籍情報更新
      description: 書籍の情報を更新する
      operationId: postBooksBookId
      tags:
        - Books
      parameters:
        - name: bookId
          in: path
          required: true
          description: 書籍ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  description: バーコード（ISBN/雑誌コード/JANコード）
                title:
                  type: string
                  description: タイトル
                authors:
                  type: array
                  items:
                    type: string
                  description: 著者リスト
                publisher:
                  type: string
                  description: 出版社
                publishedDate:
                  type: string
                  description: 出版日
                thumbnailUrl:
                  type: string
                  format: uri
                  description: サムネイル画像URL
            example:
              title: "Go言語によるWebアプリケーション開発（改訂版）"
              authors:
                - "Mat Ryer"
              publisher: "オライリージャパン"
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - title
                  - authors
                  - status
                  - createdAt
                properties:
                  id:
                    type: string
                    format: uuid
                  code:
                    type: string
                    description: バーコード（ISBN/雑誌コード/JANコード）
                  title:
                    type: string
                  authors:
                    type: array
                    items:
                      type: string
                  publisher:
                    type: string
                  publishedDate:
                    type: string
                  thumbnailUrl:
                    type: string
                    format: uri
                  status:
                    type: string
                    enum:
                      - available
                      - borrowed
                  createdAt:
                    type: string
                    format: date-time
              example:
                id: "550e8400-e29b-41d4-a716-446655440001"
                code: "9784873119045"
                title: "Go言語によるWebアプリケーション開発（改訂版）"
                authors:
                  - "Mat Ryer"
                publisher: "オライリージャパン"
                publishedDate: "2016-01-22"
                thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-904-5.jpeg"
                status: "available"
                createdAt: "2024-01-10T09:00:00Z"
        '400':
          description: リクエストが不正
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "BAD_REQUEST"
                message: "リクエストが不正です"
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "UNAUTHORIZED"
                message: "認証が必要です"
        '404':
          description: 書籍が見つからない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "NOT_FOUND"
                message: "指定された書籍が見つかりません"
        '409':
          description: 書籍コードは既に設定済みのため変更不可
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "conflict"
                message: "書籍コードは既に設定されており、変更できません"

    delete:
      summary: 書籍削除
      description: 指定した書籍を削除する。貸出中の書籍は削除できない。
      operationId: deleteBook
      tags:
        - Books
      parameters:
        - name: bookId
          in: path
          required: true
          description: 書籍ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - reason
              properties:
                reason:
                  type: string
                  enum:
                    - transfer
                    - disposal
                    - lost
                    - other
                  description: |
                    削除理由
                    - transfer: 譲渡（他の人に譲った）
                    - disposal: 破棄（廃棄処分した）
                    - lost: 紛失（紛失した）
                    - other: その他（上記以外の理由）
                memo:
                  type: string
                  maxLength: 500
                  description: 削除メモ（詳細な理由や備考）
            example:
              reason: "transfer"
              memo: "友人に譲りました"
      responses:
        '204':
          description: 削除成功
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "UNAUTHORIZED"
                message: "認証が必要です"
        '404':
          description: 書籍が見つからない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "NOT_FOUND"
                message: "指定された書籍が見つかりません"
        '409':
          description: 貸出中の書籍は削除できない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "CONFLICT"
                message: "貸出中の書籍は削除できません"

  /books/{bookId}/borrow:
    post:
      summary: 書籍を借りる
      description: 指定した書籍を借りる。既に貸出中の場合はエラー。
      operationId: postBooksBorrow
      tags:
        - Lending
      parameters:
        - name: bookId
          in: path
          required: true
          description: 書籍ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                dueDays:
                  type: integer
                  minimum: 1
                  description: 貸出期間（日数）。未指定の場合は7日。
            example:
              dueDays: 14
      responses:
        '200':
          description: 貸出成功
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - bookId
                  - borrowerId
                  - borrowedAt
                  - dueDate
                properties:
                  id:
                    type: string
                    format: uuid
                  bookId:
                    type: string
                    format: uuid
                  borrowerId:
                    type: string
                    format: uuid
                  borrowedAt:
                    type: string
                    format: date-time
                  dueDate:
                    type: string
                    format: date-time
                    description: 返却期限
              example:
                id: "550e8400-e29b-41d4-a716-446655440020"
                bookId: "550e8400-e29b-41d4-a716-446655440001"
                borrowerId: "550e8400-e29b-41d4-a716-446655440000"
                borrowedAt: "2024-01-15T10:30:00Z"
                dueDate: "2024-01-22T10:30:00Z"
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "UNAUTHORIZED"
                message: "認証が必要です"
        '404':
          description: 書籍が見つからない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "NOT_FOUND"
                message: "指定された書籍が見つかりません"
        '409':
          description: 既に貸出中
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "CONFLICT"
                message: "この書籍は既に貸出中です"

  /books/{bookId}/return:
    post:
      summary: 書籍を返却する
      description: 指定した書籍を返却する。貸出中でない場合はエラー。
      operationId: postBooksReturn
      tags:
        - Lending
      parameters:
        - name: bookId
          in: path
          required: true
          description: 書籍ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 返却成功
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                  - title
                  - authors
                  - status
                  - createdAt
                properties:
                  id:
                    type: string
                    format: uuid
                  code:
                    type: string
                    description: バーコード（ISBN/雑誌コード/JANコード）
                  title:
                    type: string
                  authors:
                    type: array
                    items:
                      type: string
                  publisher:
                    type: string
                  publishedDate:
                    type: string
                  thumbnailUrl:
                    type: string
                    format: uri
                  status:
                    type: string
                    enum:
                      - available
                      - borrowed
                  borrower:
                    type: object
                    required:
                      - id
                      - name
                      - borrowedAt
                    properties:
                      id:
                        type: string
                        format: uuid
                      name:
                        type: string
                      borrowedAt:
                        type: string
                        format: date-time
                  createdAt:
                    type: string
                    format: date-time
              example:
                id: "550e8400-e29b-41d4-a716-446655440001"
                code: "9784873119045"
                title: "Go言語によるWebアプリケーション開発"
                authors:
                  - "Mat Ryer"
                publisher: "オライリージャパン"
                publishedDate: "2016-01-22"
                thumbnailUrl: "https://www.oreilly.co.jp/books/images/picture_large978-4-87311-904-5.jpeg"
                status: "available"
                createdAt: "2024-01-10T09:00:00Z"
        '401':
          description: 認証が必要
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "UNAUTHORIZED"
                message: "認証が必要です"
        '404':
          description: 書籍が見つからない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "NOT_FOUND"
                message: "指定された書籍が見つかりません"
        '409':
          description: 貸出中ではない
          content:
            application/json:
              schema:
                type: object
                required:
                  - code
                  - message
                properties:
                  code:
                    type: string
                  message:
                    type: string
              example:
                code: "CONFLICT"
                message: "この書籍は貸出中ではありません"

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: Firebase ID Token
